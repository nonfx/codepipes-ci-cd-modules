author: CloudCover
description: The bash script to run
displayName: EKS deployment
inputs:
    internal:
        - app_env
        - files
        - repository
        - tag
        - applicationName
        - environment
        - project
        - customer_bucket
        - job_type
        - pipeline_summary_var
    properties:
        cluster:
            description: Cluster name in which deployment will happen
            title: Cluster Name
            type: string
        deployment_timeout:
            default: 300s
            description: Time to wait for pods to be ready before terming deployment as unsuccessful
            title: Deployment Timeout
            type: string
        ingress:
            default: []
            description: Ingress Details
            items:
                properties:
                    appDomain:
                        default: ""
                        title: AppDomain
                        type: string
                    bucketName:
                        default: ""
                        title: S3BucketName
                        type: string
                    certificateArn:
                        default: ""
                        title: CertificateARN
                        type: string
                    domain:
                        default: ""
                        title: DomainName
                        type: string
                    externalDNSenabled:
                        default: "false"
                        title: externalDNSenabled
                        type: string
                type: object
            title: Ingress
            type: array
        ports:
            default: []
            description: Port used in services
            items:
                properties:
                    containerPort:
                        maximum: 65535
                        title: Container port
                        type: integer
                    healthCheck:
                        default: ""
                        example: /
                        title: Health check path
                        type: string
                    name:
                        title: Service name
                        type: string
                    protocol:
                        default: TCP
                        enum:
                            - TCP
                            - UDP
                        title: Protocol
                        type: string
                required:
                    - name
                    - containerPort
                type: object
            title: Ports
            type: array
        region:
            description: region name for cluster
            title: Region name
            type: string
        roleArn:
            description: Role for deployment in EKS
            title: Role ARN
            type: string
    required:
        - cluster
        - region
        - roleArn
    type: object
keywords:
    - bash
    - linux
meta:
    inputArtifactType:
        - ContainerImage
    requiredResources:
        - aws_eks_cluster
name: basic-eks-regional
revision: 1
targets:
    - deployment
version: 1
