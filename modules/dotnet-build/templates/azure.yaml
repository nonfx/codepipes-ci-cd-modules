steps:
  - task: UseDotNet@2
    displayName: 'Use DotNet 3.x'
    inputs:
      version: 3.x
      includePreviewVersions: true
  - task: UseDotNet@2
    displayName: 'Use DotNet 6.x'
    inputs:
      version: 6.x
      includePreviewVersions: true
  - script: |
        cd {{working_dir}}
        dotnet publish -c Release -o $(System.DefaultWorkingDirectory)/publish_output
    displayName: 'Build App'
  - task: ArchiveFiles@2
    displayName: "Archive files"
    inputs:
      rootFolderOrFile: "$(System.DefaultWorkingDirectory)/publish_output"
      includeRootFolder: false
      archiveFile: "$(System.DefaultWorkingDirectory)/{{applicationName}}.zip"