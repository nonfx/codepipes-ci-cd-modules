author: CloudCover
description: Run Istio commands on EKS Clusters
displayName: EKS Istio Commands
inputs:
    internal:
        - job_type
    properties:
        cluster:
            description: Cluster name in which deployment will happen
            title: Cluster Name
            type: string
        domains:
            default: []
            description: Domain Names to be used for Ingress/Certificates
            items:
                properties:
                    name:
                        default: ""
                        title: Domain name
                        type: string
                type: object
            title: Domain Names
            type: array
        enable_istio_access_log:
            default: true
            description: To enable Istio access logging
            title: Istio-proxy Access Log
            type: boolean
        ingress:
            default: []
            description: Ingress Details
            items:
                properties:
                    bucketName:
                        default: ""
                        title: S3BucketName
                        type: string
                    certificateArn:
                        default: ""
                        title: CertificateARN
                        type: string
                    externalDNSenabled:
                        default: "false"
                        title: externalDNSenabled
                        type: string
                    lbFaceType:
                        default: internet-facing
                        title: AwsLoadBalancerFaceType
                        type: string
                type: object
            title: Ingress
            type: array
        ingress_install:
            default: false
            title: IngressInstall
            type: boolean
        istio_args:
            default: install --set profile=default
            description: Istio Argument
            title: Istio Arguments
            type: string
        istio_version:
            default: 1.13.2
            description: Istio version to install
            title: Istio Version
            type: string
        projectName:
            default: codepipes
            description: project name
            title: project name
            type: string
        region:
            description: region name for cluster
            title: Region name
            type: string
        roleArn:
            description: AWS Role ARN to be user
            title: AWS Role ARN
            type: string
    required:
        - cluster
        - region
        - roleArn
keywords:
    - bash
    - linux
meta:
    inputArtifactType:
        - ContainerImage
    requiredResources:
        - aws_eks_cluster
name: istio-eks-app
revision: 1
targets:
    - deployment
version: 1
