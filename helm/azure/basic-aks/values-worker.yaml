# This is just a placeholder YAML to test the voting app locally in case of any issuses since the actual
# yaml file are generate by Deployment Service.
# Fields marked with #auto are auto generated by Deployment pipeline

applicationName: "voting-worker" #auto
environment: "demo"  #auto
project: "codepipes" #auto
deploymentName: "voting-worker-app"

deploy:
  replicaCount: 1
  strategy: RollingUpdate
  maxUnavail: 1
  maxSurge: 1
  terminationGracePeriodSeconds: 30
  healthCheck:
    liveFailThreshold: "2"
    liveSuccThreshold: "1"
    readFailThreshold: "2"
    readSuccThreshold: "1"
    delay: "10"
    period: "4"
    timeout: "2"

ports: #auto

image: 
  repository: "cldcvr/codepipes-example-worker" #auto
  pullPolicy: Always
  tag: "latest"
  registryCredentials: 
    registry: ""
    username: ""
    password: ""

service:
  type: nodeport
  private: false

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80

resourcequota:
  quotaRequestsCpu: 100
  quotaRequestsMem: 0.2
  quotaLimitsCpu: 200
  quotaLimitsMem: 0.3

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi

lifecycle:
  prestop:
    command: '["/bin/sh", "-c", "sleep 30"]'

artifacts: #auto
  # - files: ["b.yaml"] #Commented out as not needed for the current app but may be required to test in the future
  #   mountPath: /tmp/2
  # - files: ["a.yaml"]
  #   mountPath: /tmp/1

envs: #auto
  PG_HOST: "PlaceHolder_PG_HOST"
  REDIS_HOST: "PlaceHolder_REDIS_HOST"
